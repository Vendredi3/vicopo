/**
 * Vicopo
 * @author https://github.com/kylekatarnls
 * http://vicopo.selfbuild.fr
 */
jQuery(function($){var _13=~(location.protocol+'').indexOf('s')?'https://www.selfbuild.fr/vicopo':'http://vicopo.selfbuild.fr';var _3={};var _7=function(a,b){return a.city-b.city};var _8=function(){return true};$.extend({vicopoSort:function(s){_7=s},vicopoFilter:function(f){_8=f},vicopoPrepare:function(c){c=c.filter(_8);return c.sort(_7)},vicopo:function(_0,_1){_0=_0.trim();return this.getVicopo(/^\d+$/.test(_0)?'code':'city',_0,_1)},codePostal:function(_0,_1){return this.getVicopo('code',_0,_1)},ville:function(_0,_1){return this.getVicopo('city',_0,_1)},getVicopo:function(_2,_0,_1){if(_0.length>1){_0=_0.trim();_3[_2]=_3[_2]||{};if(_3[_2][_0]){_1(_0,$.vicopoPrepare(_3[_2][_0]||[]),_2)}else{var _6={};_6[_2]=_0;return $.getJSON(_13,_6,function(_5){_3[_2][_0]=_5.cities;_1(_5.input,$.vicopoPrepare(_5.cities||[]),_2)})}}else{_1(_0,[],_2)}}});$.fn.extend({vicopoClean:function(){return $(this).each(function(){var _10=[];for(var n=$(this).next();n.hasClass('vicopo-answear');n=n.next()){_10.push(n[0])}$(_10).remove()})},vicopoTargets:function(){var _9=[];$(this).each(function(){var t=$(this);$('[data-vicopo]').each(function(){if(t.is($(this).data('vicopo'))){_9.push(this)}})});return $(_9)},vicopoTarget:function(){return $(this).vicopoTargets().first()},getVicopo:function(_14,_1){return $(this).keyup(function(){var i=$(this);$[_14](i.val(),function(_0,_4,_2){if(_0==i.val()){_1(_4,_2,_0)}})})},vicopo:function(_1){return $(this).getVicopo('vicopo',_1)},codePostal:function(_1){return $(this).getVicopo('codePostal',_1)},ville:function(_1){return $(this).getVicopo('ville',_1)}});var _11='input, textarea, select';$(document).on('keyup change',_11,function(){var t=$(this);var _0=t.val();if(t.data('vicopo-value')!==_0){var _t=t.data('vicopo-value',_0).vicopoTargets().each(function(){var r=$(this).hide().vicopoClean()});if(_0.length){$.vicopo(_0,function(_12,_4){if(_12===_0){_t.each(function(){var r=$(this).vicopoClean();var _t=r.clone();_t.show().removeAttr('data-vicopo');var _c=[];$.each(_4,function(){var c=_t.clone();c.addClass('vicopo-answear');c.find('[data-vicopo-code-postal]').text(this.code);c.find('[data-vicopo-ville]').text(this.city);c.find('[data-vicopo-val-code-postal]').val(this.code);c.find('[data-vicopo-val-ville]').val(this.city);_c.push(c)});r.after(_c)})}})}}});$(_11).trigger('keyup')});
